# CheaperForDrug Scraper - Container-Level Crontab
# Runs scrapers inside each container on Monday and Thursday at 7:00 AM
#
# This cron configuration is installed inside each Docker container
# Each container runs scrapers for its specific country (determined by COUNTRY env var)
#
# Schedule: Monday and Thursday at 7:00 AM (Europe/Warsaw timezone)
# Format: minute hour day month weekday command
#
# Weekdays: 0 = Sunday, 1 = Monday, 4 = Thursday

# Environment variables for cron
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/app/node_modules/.bin
HOME=/root

# Run scrapers every Monday and Thursday at 7:00 AM
0 7 * * 1,4 /usr/local/bin/run-scraper-cron.sh >> /app/logs/cron/scraper.log 2>&1

# Explanation:
# 0      = minute (0 = top of the hour)
# 7      = hour (7 = 7 AM Europe/Warsaw time)
# *      = day of month (any day)
# *      = month (any month)
# 1,4    = day of week (1 = Monday, 4 = Thursday)
#
# The script /usr/local/bin/run-scraper-cron.sh will:
# - Load environment variables from the container
# - Check VPN connection status
# - Run scrapers for the container's country (based on COUNTRY env var)
# - Log all output to /app/logs/cron/scraper.log
#
# Logs are saved to:
# - /app/logs/cron/scraper.log (scraper execution log)
# - /app/logs/cron.stdout.log (cron daemon stdout - managed by supervisord)
# - /app/logs/cron.stderr.log (cron daemon stderr - managed by supervisord)

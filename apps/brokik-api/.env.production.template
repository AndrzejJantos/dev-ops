# Brokik API Production Environment
# Domain: brokik.com

# ============================================================================
# RAILS ENVIRONMENT
# ============================================================================
RAILS_ENV=production
RACK_ENV=production
NODE_ENV=production

# ============================================================================
# APPLICATION
# ============================================================================
APP_NAME=brokik-api
DOMAIN=brokik.com
SECRET_KEY_BASE=CHANGE_ME_IN_PRODUCTION

# ============================================================================
# DATABASE (PostgreSQL)
# ============================================================================
DB_HOST=localhost
DATABASE_URL=postgresql://brokik_user:CHANGE_DB_PASSWORD@${DB_HOST}:5432/brokik_production
DB_POOL=25

POSTGRES_HOST=${DB_HOST}
POSTGRES_PORT=5432
POSTGRES_DB=brokik_production
POSTGRES_USER=brokik_user
POSTGRES_PASSWORD=CHANGE_DB_PASSWORD

# ============================================================================
# REDIS (Sidekiq + Caching)
# ============================================================================
REDIS_URL=redis://localhost:6379/3
REDIS_CACHE_URL=redis://localhost:6379/4

# ============================================================================
# WEB SERVER
# ============================================================================
PORT=80
RAILS_MAX_THREADS=5
WEB_CONCURRENCY=2
RAILS_LOG_LEVEL=info
RAILS_SERVE_STATIC_FILES=true
CONTAINER_NAME=brokik-api-web

# ============================================================================
# FRONTEND / CORS
# ============================================================================
ALLOWED_ORIGINS=https://brokik.com,https://www.brokik.com
FRONTEND_URL=https://brokik.com

# ============================================================================
# EMAIL (SendGrid)
# ============================================================================
MAIL_DELIVERY_METHOD=sendgrid_api
SENDGRID_API_KEY=CHANGE_ME_IN_PRODUCTION
SENDGRID_FROM_EMAIL=noreply@brokik.com
DEFAULT_FROM_EMAIL=noreply@brokik.com
SUPPORT_EMAIL=support@brokik.com

# ============================================================================
# ACTIVE STORAGE
# ============================================================================
# Files persist outside Docker containers and are shared across deployments
RAILS_ACTIVE_STORAGE_SERVICE=host_disk
ACTIVE_STORAGE_HOST_PATH=/var/storage/brokik-api/active_storage
CDN_HOST=https://cdn.webet.pl
FILES_STORAGE_URL=brokik.com

# ============================================================================
# BACKGROUND JOBS (Sidekiq)
# ============================================================================
SIDEKIQ_CONCURRENCY=10

# ============================================================================
# CACHING
# ============================================================================
CACHE_STORE=redis_cache_store

# ============================================================================
# SECURITY / JWT
# ============================================================================
JWT_SECRET_KEY=CHANGE_ME_IN_PRODUCTION
JWT_EXPIRATION_HOURS=24
DEVISE_JWT_SECRET_KEY=CHANGE_ME_IN_PRODUCTION

# API Rate Limiting
ENABLE_API_RATE_LIMITING=true
ENABLE_REQUEST_LOGGING=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60

# ============================================================================
# PAYMENTS (Stripe)
# ============================================================================
STRIPE_SECRET_KEY=CHANGE_ME_IN_PRODUCTION
STRIPE_PUBLISHABLE_KEY=CHANGE_ME_IN_PRODUCTION

# ============================================================================
# LOCALE / TIMEZONE
# ============================================================================
DEFAULT_LOCALE=pl
AVAILABLE_LOCALES=pl,en
TIME_ZONE=Warsaw
